# 관계형 데이터베이스 설계

---

## 1. 좋은 관계형 설계의 특징

<br>

> 불필요한 중복 없이 정보를 저장하고 쉽게 검색이 가능

<br>

### 1) 중복의 문제

<br>

| ID | name  | salary       | dept_name | building | budget |
|------------|------|------------|----|------------|------|
| 1        | Yang | 95000         | Physics | Watson        | 70000   |
| 2        | Park   | 90000       | Physics | Watson        | 70000    |
| 3        | Lee | 60000         | Finance | Painter        | 120000         |
| 4        | Cho  | 75000    | Finance | Painter        | 120000    |

<br>

- dept_name, building, budget과 같은 학과의 정보를 중복 저장하여 손해
- budget 수정 시 관련 학과를 모두 수정하지 않으면 일관성을 잃을 수 있음

### 2) Null 문제

<br>

- 학과만 신설할 경우 교수 채용 전이라면 ID, name, salary에 null 값을 가지게 됨

### 3) 분해

> 스키마에 문제가 있다면 분해하여 해결 가능

<br>

이전의 스키마를 교수와 학과 스키마로 분해하면 관련 문제를 해결할 수 있음

- 분해로 인해 정보의 손실이 발생한다면 분해하지 말아야 함
- **무손실 분해** : R = πR1(R) ⋈ πR2(R)
- **손실 분해** : R ≠ πR1(R) ⋈ πR2(R)

<기존>
| ID | name  | street       | city | salary |
|------------|------|------------|------------|-----|
| 1        | Yang | Main         | Perryridge | 95000        |
| 2        | Park   | North       | Hampton | 90000        |

<분해>
| ID | name  | |street       | city | salary |
|------------|------|-----|------------|------------|-----|
| 1        | Yang || Main        | Perryridge | 95000        |
| 2        | Park || North       | Hampton | 90000        |

<자연 조인>

| ID | name  | street       | city | salary |
|------------|------|------------|------------|-----|
| 1        | Yang | Main         | Perryridge | 95000        |
| 1        | Yang | North       | Hampton | 90000         |
| 2        | Park | Main         | Perryridge | 95000        |
| 2        | Park | North       | Hampton | 90000        |

- 분해 후 자연 조인 결과가 기존의 릴레이션과 다름
- 실제 거주 위치 급여와 관련 없는 이름과 조인이 일어나게 되어서 불필요한 정보가 생성됨
- 이름과 주소 또는 급여와의 연관 관계 정보가 손실됨

<br>

## 2. 함수 종속을 사용한 분해

<br>

### 1) 적법한 인스턴스

> 데이터베이스의 모든 릴레이션 인스턴스가 실제 세계의 제약 조건을 만족

<br>

### 2) 함수 종속

> 어떤 속성 값이 다른 속성 값을 결정할 수 있는 관계

<br>

- r(R)인스턴스 내 모든 튜플의 쌍 t1, t2가 t1[X] = t2[X]이면, t1[Y] = t2[Y]를 만족하면 **함수 종속** X → Y를 만족
- 함수 종속 X → Y이 성립하면 X는 r(R)인스턴스의 **수퍼키**라는 것을 의미
- 함수 종속 집합 F를 만족하는 r(R)인스턴스에 대해 **F는 r(R)을 보존**한다고 함
- R1 ∩ R2 → R1 또는 R1 ∩ R2 → R2이면 R을 R1과 R2로 분해하는 것은 **무손실 분해**

<br>

